[TOC]

### Serializable
```java
// 序列化
User user = new User(998, "Tony");
ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream("a.txt"));
outputStream.writeObject(user);
outputStream.close();
// 反序列化
ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream("a.txt"));
User newUser = (User) inputStream.readObject();
inputStream.close();
System.out.println(newUser.toString());
```

#### serialVersionUID
* serialVersionUID是静态常量，属于类不属于对象，所以不参与序列化
* 序列化与反序列化的serialVersionUID不一致会报异常
* 手动指定serialVersionUID的意义在于，避免因为反序列化时当前类有所改变，比如增加或者删除了某些成员变量，系统就会重新计算当前类的hash值并且把它赋值给serialVersionUID，从而导致serialVersionUID不一致，反序列化失败
* 虽然Serializable可以将数据持久化在磁盘，但其在内存序列化上开销比较大
* Serializable在序列化的时候会产生大量的临时变量，从而引起频繁的GC

#### transient
> 标记属性不参与序列化

### Parcelable
* Parcelable是Android特有的
* 性能比serializable更好，内存开销小

```java
public class User implements Parcelable {
    public static final Parcelable.Creator<User> CREATOR = new Parcelable.Creator<User>() {
        /**
         * 从序列化后的对象中创建原始对象
         */
        @Override
        public User createFromParcel(Parcel source) {
            return new User(source);
        }

        /**
         * 指定长度的原始对象数组
         */
        @Override
        public User[] newArray(int size) {
            return new User[size];
        }
    };
    private int age;
    private String name;

    public User(int age, String name) {
        this.age = age;
        this.name = name;
    }

    /**
     * 从序列化后的对象中创建原始对象
     */
    protected User(Parcel in) {
        this.age = in.readInt();
        this.name = in.readString();
    }

    /**
     * 返回当前对象的内容描述。如果含有文件描述符，返回1，否则返回0，几乎所有情况都返回0
     */
    @Override
    public int describeContents() {
        return 0;
    }

    /**
     * 将当前对象写入序列化结构中
     *
     * @param flags 为1时标识当前对象需要作为返回值返回，不能立即释放资源，几乎所有情况下都为0.
     */
    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(this.age);
        dest.writeString(this.name);
    }
}
```

## 对比
对比 | 存储 | 方式 | 效率
:---: | :---: | :---: | :---:
Serializable | 磁盘 | 反射、I/O | 低
Parcelable | Native内存 | marshalled &unmarshalled | 快很多